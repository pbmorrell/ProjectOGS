function EditProfileOnReady(){$("#DOBDatePicker").datepicker({inline:!0,yearRange:"-125:-2",changeYear:!0,changeMonth:!0,constrainInput:!0,showButtonPanel:!0,showOtherMonths:!0,dayNamesMin:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],defaultDate:"-2y",dateFormat:"yy-mm-dd"}),$("#togglePassword").hide(),$("#togglePasswordConfirm").hide(),$("#passwordMatch").hide(),$("#pwd").pStrength({changeBackground:!1,onPasswordStrengthChanged:function(a,b){evaluateCurrentPWStrength("#pwd","#passwordStrength",a,b)}}),$("#pwd").keyup(function(){evaluateCurrentPWVal("#pwd","#pwdConfirm","#passwordMatch","#togglePassword")}),$("#pwdConfirm").keyup(function(){evaluateCurrentPWConfirmVal("#pwd","#pwdConfirm","#passwordMatch","#togglePasswordConfirm")}),$("#userName").blur(function(){evaluateUserNameAvailability("#userName","#userNameTakenIndicator","AJAXHandler.php")}),$(".mobileButtonDisplay").on("click","#signupBtnMobile",function(){return OnEditProfile("#editProfileStatusMobile")}),$(".submitFormDiv").on("click","#signupBtn",function(){return OnEditProfile("#editProfileStatus")}),$(".mobileButtonDisplay").on("click","#gamerTagUpdateBtnMobile",function(){return OnGamerTagUpdateClick()}),$(".submitFormDiv").on("click","#gamerTagUpdateBtn",function(){return OnGamerTagUpdateClick()}),$(".mobileButtonDisplay").on("click","#eventReminderSettingsBtnMobile",function(){return OnEventReminderSettingsClick()}),$(".submitFormDiv").on("click","#eventReminderSettingsBtn",function(){return OnEventReminderSettingsClick()})}function OnGamerTagUpdateClick(){return OpenGamerTagViewer(editProfileGamerTagManagerDlg,editProfileGamerTagManagerJTableDiv.substring(1),"Gamer Tag Management","Your Gamer Tags",!1,!1,-1),!1}function OnEventReminderSettingsClick(){var a=GetCurWidthClass(),b="top",c=500,d=465;return"mobile"==a&&(c=400,b="top+10%"),"xtraSmall"==a&&(c=275,b="top+10%"),displayJQueryDialog("dlgEvtReminderSettings","Event Reminder Settings","top",b,window,!1,!0,"AJAXHandler.php?action=EventReminderSettingsLoad",function(){EventReminderDialogOnReady($("#dlgEvtReminderSettings").dialog())},c,d),!1}function OnViewportSizeChanged(a,b,c,d,e,f){"desktop"!=c||"mobile"!=d&&"xtraSmall"!=d||$("#"+editProfileGamerTagManagerDlg).length&&$("#"+editProfileGamerTagManagerDlg+" .jtable").length&&($(editProfileGamerTagManagerJTableDiv+" .jtable-page-size-change").hide(),$("#"+editProfileGamerTagManagerDlg).dialog("option","width",400>a?a-25:400)),"mobile"!=c&&"xtraSmall"!=c||"desktop"!=d||$("#"+editProfileGamerTagManagerDlg).length&&$("#"+editProfileGamerTagManagerDlg+" .jtable").length&&($(editProfileGamerTagManagerJTableDiv+" .jtable-page-size-change").show(),$("#"+editProfileGamerTagManagerDlg).dialog("option","width",600>a?a-25:600))}function OnEditProfile(a){var b=$("#emailAddress").val(),c=$("#pwd").val(),d=$("#pwdConfirm").val(),e=$("#passwordStrength").text(),f=$("#userName").val(),g=$("#DOBDatePicker").val(),h=$("#message").val(),i=$("input[name='platforms[]']:checked").length;return validEmailRegEx.test(b)===!1?sweetAlert("Oops...","Unable to update account: Please enter a valid email address","error"):c!==d?sweetAlert("Oops...","Unable to update account: Your Password does not match the Password Confirmation","error"):c.length>0&&("Very Weak"==e||"Weak"==e)?sweetAlert("Oops...","Unable to update account: The strength rating for your new password must at least be 'Fair'","error"):0===f.trim().length?sweetAlert("Oops...","Unable to update account: The Username field must be filled","error"):0===b.trim().length||0===g.trim().length||0===h.trim().length?sweetAlert("Oops...","Unable to update account: The Email, Birthdate and Autobiography fields must be filled","error"):(i>0||0===i&&confirm("No game platforms selected...proceed with update?"))&&($(a).attr("class","preEditProfile"),$(a).html("Updating Account..."),$(a).fadeIn(200),$.ajax({type:"POST",url:"AJAXHandler.php",data:"action=UpdateAccount&"+$("#signupForm").serialize(),success:function(b){"true"===b?window.location.href="MemberHome.php":($(a).attr("class","editProfileErr"),$(a).html(b),setTimeout(function(){$(a).hide()},3e3))}})),!1}function EventReminderDialogOnReady(a){$("#cancelBtn").click(function(){return a.dialog("destroy").remove(),!1}),$("#submitBtn").click(function(){return OnApplyEventReminderChanges(a)}),selReminderEmailTimeInterval=$("#timeIntervalSelector").val(),$("#timeIntervalSelector").change(function(){var a=$("#timeIntervalSelector").val();return selReminderEmailTimeInterval==a?!1:(selReminderEmailTimeInterval=a,$(".timeIntervalSelect").addClass("hidden"),void("min"==a?$("#minuteSelector").removeClass("hidden"):"hr"==a?$("#hourSelector").removeClass("hidden"):$("#daySelector").removeClass("hidden")))})}function OnApplyEventReminderChanges(a){var b=$("#reminderEmailsEnabled").is(":checked")?1:0,c=$("#reminderEmailAddress").val();if(validEmailRegEx.test(c)===!1)sweetAlert("Oops...","Unable to update event reminder settings: Please enter a valid email address","error");else{var d=-1;switch($("#timeIntervalSelector").val()){case"min":d=$("#minuteSelector").val();break;case"hr":var e=$("#hourSelector").val();d=60*e;break;case"day":var f=$("#daySelector").val();d=1440*f}var g="action=EventReminderSettingsUpdate&sendReminderEmails="+b+"&reminderEmailAddress="+c+"&reminderEmailTimeToSend="+d;$.ajax({type:"POST",url:"AJAXHandler.php",data:g,success:function(b){"true"===b?(sweetAlert("Success","Updated event reminder settings!","success"),a.dialog("destroy").remove()):sweetAlert(b)}})}return!1}var editProfileGamerTagManagerDlg="gamerTagManagerDlg",editProfileGamerTagManagerJTableDiv="#manageGamerTagsDiv",selReminderEmailTimeInterval="",validEmailRegEx=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;