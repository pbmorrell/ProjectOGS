function FindFriendsOnReady(){$(panelEnum.MyFriendsViewer).hide(),$("#modalOverlay").slideReveal({position:"right",push:!1}),$("#searchPanel").slideReveal({position:"right",push:!1}),$("#searchFilterLink").on("touchend",function(a){a.preventDefault(),$("#modalOverlay").data("slide-reveal")?CloseSearchPanel():($("#modalOverlay").slideReveal("show"),$("#searchPanel").slideReveal("show"))}),$("#searchFilterLink").click(function(a){a.preventDefault(),$("#modalOverlay").data("slide-reveal")?CloseSearchPanel():($("#modalOverlay").slideReveal("show"),$("#searchPanel").slideReveal("show"))}),$(".overlayPanelFilterGroup").hide(),DisplaySearchFiltersByCurrentView(),$("#friendTypeInvToMe").prop("checked",!0),$("#friendTypeRejectedInv").prop("checked",!0),$("#friendTypeCurFriends").prop("checked",!0),$("#closePanelBtn").click(CloseSearchPanel),$("#swipeHoverIcon").on("touchend",function(a){a.preventDefault(),$(".overlayPanelControlElementGroup").children("button").first().is(":visible")?$("#swipeHoverIcon").attr("src","images/SwipeRight.png"):$("#swipeHoverIcon").attr("src","images/SwipeLeft.png"),$(".overlayPanelControlElementGroup").children("button").toggle("slide")}),$("#swipeHoverIcon").click(function(a){a.preventDefault(),$(".overlayPanelControlElementGroup").children("button").first().is(":visible")?$("#swipeHoverIcon").attr("src","images/SwipeRight.png"):$("#swipeHoverIcon").attr("src","images/SwipeLeft.png"),$(".overlayPanelControlElementGroup").children("button").toggle("slide")});var a=$(window).height();lastWindowHeight=a;var b=$(window).width();lastWindowWidth=b;var c=!0;OnViewportSizeChanged(b,a,"desktop",GetCurWidthClass(),"desktop",GetCurHeightClass(),c),$("#searchPanel .overlayPanelToggleActiveChk").each(function(){$(this).change(function(){var a="#"+$(this).attr("linkId"),b="#"+$(this).attr("groupId"),c="#"+$(this).attr("lblId");if($(a).hasClass("overlayPanelToggleElementInactive")){$(a).removeClass("overlayPanelToggleElementInactive").addClass("overlayPanelToggleElementActive"),$(b).find(".overlayPanelElement").removeClass("filterFieldActive").addClass("filterFieldActive");var d="Deactivate Filter";isMobileView()&&(d="Deactivate"),$(c).text(d)}else{$(a).removeClass("overlayPanelToggleElementActive").addClass("overlayPanelToggleElementInactive"),$(b).find(".overlayPanelElement").removeClass("filterFieldActive");var d="Activate Filter";isMobileView()&&(d="Activate"),$(c).text(d)}})}),$("#searchBtn").click(function(){var a=activePanel===panelEnum.AvailUserSearch,b=".searchPanelAvailUsersFilter";a||(b=".searchPanelCurFriendsFilter");var c=ValidateSearchFormFields(b);return c.validated&&(a?ReloadAvailUsersTable(!0):ReloadManageFriendsTable(!0)),!1}),LoadAvailUsersForFriendInvite(),LoadCurrentFriendListForUser()}function OnViewportSizeChanged(a,b,c,d,e,f,g){HandleWidthTransition(a,c,d,g),HandleHeightTransition(b,e,f),"desktop"==d&&"desktop"==f?($(".overlayPanelFixedHeightScrollableContainer").css("padding-top","2%"),$(".overlayPanelControlElementGroup").children("button").show(),$(".swipeHoverIconContainer").hide()):($(".overlayPanelFixedHeightScrollableContainer").css("padding-top","8%"),$(".swipeHoverIconContainer").show())}function HandleWidthTransition(a,b,c,d){var e=!1,f=Math.round(.65*a);"desktop"!=b&&!d||"mobile"!=c&&"xtraSmall"!=c||($("#"+gamerTagViewerDlg).length&&$("#"+gamerTagViewerDlg+" .jtable").length&&($(gamerTagViewerJTableDiv+" .jtable-page-size-change").hide(),$("#"+gamerTagViewerDlg).dialog("option","width",400>a?a-25:400)),f="mobile"==c?Math.round(.8*a):Math.round(.95*a),$(".overlayPanelToggleActiveLbl").filter(function(a){return"Activate Filter"===$(this).text()}).text("Activate"),$(".overlayPanelToggleActiveLbl").filter(function(a){return"Deactivate Filter"===$(this).text()}).text("Deactivate"),d||(FormatAvailUsersTableForCurrentView(!0,c),FormatCurFriendsTableForCurrentView(!0,c)),e=!0),"mobile"!=b&&"xtraSmall"!=b&&!d||"desktop"!=c||($("#"+gamerTagViewerDlg).length&&$("#"+gamerTagViewerDlg+" .jtable").length&&($(gamerTagViewerJTableDiv+" .jtable-page-size-change").show(),$("#"+gamerTagViewerDlg).dialog("option","width",600>a?a-25:600)),$(".overlayPanelToggleActiveLbl").filter(function(a){return"Activate"===$(this).text()}).text("Activate Filter"),$(".overlayPanelToggleActiveLbl").filter(function(a){return"Deactivate"===$(this).text()}).text("Deactivate Filter"),d||(FormatAvailUsersTableForCurrentView(!1),FormatCurFriendsTableForCurrentView(!1)),e=!0),(Math.abs(a-lastWindowWidth)>50||d)&&(CloseSearchPanel(),$("#modalOverlay").slideReveal({changeWidth:!0,width:a+20}),e&&$("#searchPanel").slideReveal({changeWidth:!0,width:f})),lastWindowWidth=a}function HandleHeightTransition(a,b,c){var d=.9;"desktop"!=c&&(d=.7);var e=d*a;$(".overlayPanelFixedHeightScrollableContainer").css("height",e.toString()+"px"),Math.abs(a-lastWindowHeight)>100&&CloseSearchPanel(),lastWindowHeight=a}function FormatAvailUsersTableForCurrentView(a,b){var c="curEvtsHiddenInMobileView";if(a){if($("."+c).removeClass(c),$(availUsersJTableDiv+" .fixedWidthScrollableContainer .jtable").unwrap(),"mobile"==b?$(availUsersJTableDiv+" .jtable-title-text").text("Available Users"):"xtraSmall"==b&&$(availUsersJTableDiv+" .jtable-title-text").text("User List"),$(availUsersJTableDiv+' .jtable-toolbar-item-text:contains("Invite Selected")').text("Invite"),"xtraSmall"==b){var d=$(availUsersJTableDiv+' th:contains("Gender")'),e=$(d).index();$(d).addClass(c),$(availUsersJTableDiv).children(".jtable-main-container").children(".jtable").children("tbody").children("tr").each(function(){var a=$(this).children("td").eq(e);$(a).addClass(c)})}if($(availUsersJTableDiv+" .jtable-page-size-change").hide(),"xtraSmall"==b&&$(availUsersJTableDiv+" .jtable-goto-page").hide(),$(availUsersJTableDiv+" table").removeClass("desktopViewFontSize").addClass("mobileViewFontSize"),$(availUsersJTableDiv+" .jtable-main-container").children(".jtable").wrap('<div class="fixedWidthScrollableContainer"></div>'),$(availUsersJTableDiv+" .jtable-title").is(":visible")){var f=$(availUsersJTableDiv+" .jtable-title").width();$(availUsersJTableDiv+" .fixedWidthScrollableContainer").css("width",f+10+"px")}}else $(availUsersJTableDiv+" .jtable-title-text").text("Available Users"),$(availUsersJTableDiv+' .jtable-toolbar-item-text:contains("Invite")').text("Invite Selected"),$("."+c).removeClass(c),$(availUsersJTableDiv+" .jtable-page-size-change").show(),$(availUsersJTableDiv+" .jtable-goto-page").show(),$(availUsersJTableDiv+" table").removeClass("mobileViewFontSize").addClass("desktopViewFontSize"),$(availUsersJTableDiv+" .fixedWidthScrollableContainer .jtable").unwrap()}function FormatCurFriendsTableForCurrentView(a,b){var c="evtMgrHiddenInMobileView";if(a){$("."+c).removeClass(c),$(manageFriendsListJTableDiv+" .fixedWidthScrollableContainer .jtable").unwrap(),$("."+c).removeClass(c);var d=$(manageFriendsListJTableDiv+' th:contains("First")'),e=$(manageFriendsListJTableDiv+' th:contains("Last")'),f=$(d).index(),g=$(e).index();if($(d).addClass(c),$(e).addClass(c),$(manageFriendsListJTableDiv).children(".jtable-main-container").children(".jtable").children("tbody").children("tr").each(function(){var a=$(this).children("td").eq(f),b=$(this).children("td").eq(g);$(a).addClass(c),$(b).addClass(c)}),"mobile"==b?$(manageFriendsListJTableDiv+" .jtable-title-text").text("Current Friends"):"xtraSmall"==b&&$(manageFriendsListJTableDiv+" .jtable-title-text").text("Friends"),$(manageFriendsListJTableDiv+' .jtable-toolbar-item-text:contains("Accept Selected")').text("Accept"),$(manageFriendsListJTableDiv+' .jtable-toolbar-item-text:contains("Remove Selected")').text("Remove"),$(manageFriendsListJTableDiv+" .jtable-page-size-change").hide(),"xtraSmall"==b&&$(manageFriendsListJTableDiv+" .jtable-goto-page").hide(),$(manageFriendsListJTableDiv+" table").removeClass("desktopViewFontSize").addClass("mobileViewFontSize"),$(manageFriendsListJTableDiv+" .jtable-main-container").children(".jtable").wrap('<div class="fixedWidthScrollableContainer"></div>'),$(manageFriendsListJTableDiv+" .jtable-title").is(":visible")){var h=$(manageFriendsListJTableDiv+" .jtable-title").width();$(manageFriendsListJTableDiv+" .fixedWidthScrollableContainer").css("width",h+10+"px")}}else{$(manageFriendsListJTableDiv+" .jtable-title-text").text("Current Friends"),$(manageFriendsListJTableDiv+' .jtable-toolbar-item-text:contains("Accept")').text("Accept Selected"),$(manageFriendsListJTableDiv+' .jtable-toolbar-item-text:contains("Remove")').text("Remove Selected"),$(manageFriendsListJTableDiv+" .jtable-page-size-change").show(),$(manageFriendsListJTableDiv+" .jtable-goto-page").show(),$(manageFriendsListJTableDiv+" table").removeClass("mobileViewFontSize").addClass("desktopViewFontSize"),$(manageFriendsListJTableDiv+" .fixedWidthScrollableContainer .jtable").unwrap(),$("."+c).removeClass(c);var i=$(manageFriendsListJTableDiv+' th:contains("Full Name")'),j=$(i).index();$(i).addClass(c),$(manageFriendsListJTableDiv).children(".jtable-main-container").children(".jtable").children("tbody").children("tr").each(function(){var a=$(this).children("td").eq(j);$(a).addClass(c)})}}function LoadAvailUsersForFriendInvite(){$(availUsersJTableDiv).jtable({title:"Available Users",paging:!0,pageSize:10,pageSizes:[5,10,15,20,25],pageSizeChangeArea:!0,pageList:"minimal",sorting:!0,defaultSorting:"UserName ASC",openChildAsAccordion:!1,selecting:!0,multiselect:!0,selectingCheckboxes:!0,selectOnRowClick:!1,toolbar:{items:[{text:"Invite Selected",icon:"images/envelope_closed.png",tooltip:"Invite selected users to be your friend",click:function(){IssueFriendInviteToSelectedUsers()}},{text:"Refresh",icon:"images/refresh.png",tooltip:"Refreshes list of available users",click:function(){var a=!1;ReloadAvailUsersTable(a)}}]},actions:{listAction:"AJAXHandler.php"},fields:{ID:{key:!0,list:!1},UserName:{title:"Username",width:"20%",sorting:!0,display:function(a){var b=$('<a href="#" class="actionLink" id="unDetailsLink'+a.record.ID+'">'+a.record.UserName+"</a>");return b.click(function(){return OpenUserDetailsPopup(a.record.ID,a.record.UserName),!1}),b}},FirstName:{title:"First Name",width:"17%",sorting:!0},LastName:{title:"Last Name",width:"23%",sorting:!0},Gender:{title:"Gender",width:"10%",sorting:!0},GamerTags:{title:"View Gamer Tags",width:"15%",sorting:!1,display:function(a){var b=$('<a href="#" class="actionLink" id="tagsLink'+a.record.ID+'">Show Tags</a>');return b.click(function(){return OpenGamerTagViewer(gamerTagViewerDlg,gamerTagViewerJTableDiv.substring(1),"Gamer Tag Viewer","Gamer Tags For: "+(a.record.FirstName+" "+a.record.LastName),!0,!0,a.record.ID),!1}),b}},SendInvite:{title:"Send Invite",width:"15%",display:function(a){var b=$('<img alt="Invite" title="Invite this user to be your friend" src="images/envelope_closed.png" />');return b.click(function(){var b=[a.record.ID];SendFriendInviteToUsers(b)}),b},sorting:!1,columnSelectable:!1}},recordsLoaded:function(a,b){var c=GetCurWidthClass();"desktop"!=c&&FormatAvailUsersTableForCurrentView(!0,c)}}),ReloadAvailUsersTable(!0)}function LoadCurrentFriendListForUser(){$(manageFriendsListJTableDiv).jtable({title:"Current Friends",paging:!0,pageSize:10,pageSizes:[5,10,15,20,25],pageSizeChangeArea:!0,pageList:"minimal",sorting:!0,defaultSorting:"UserName ASC",openChildAsAccordion:!1,selecting:!0,multiselect:!0,selectingCheckboxes:!0,selectOnRowClick:!1,toolbar:{items:[{text:"Accept Selected",icon:"images/activate.png",tooltip:"Accepts any active invitations from selected users",click:function(){AcceptUserFriendInvites()}},{text:"Remove Selected",icon:"images/delete.png",tooltip:"Removes selected users from your friend list, or cancels any active invitations",click:function(){RemoveUsersFromFriendList()}},{text:"Refresh",icon:"images/refresh.png",tooltip:"Refreshes friend list",click:function(){var a=!1;ReloadManageFriendsTable(a)}}]},actions:{listAction:"AJAXHandler.php"},fields:{ID:{key:!0,list:!1},UserName:{title:"Username",width:"17%",sorting:!0,display:function(a){var b=$('<a href="#" class="actionLink" id="unDetailsLink'+a.record.ID+'">'+a.record.UserName+"</a>");return b.click(function(){return OpenUserDetailsPopup(a.record.ID,a.record.UserName),!1}),b}},FirstName:{title:"First Name",width:"14%",sorting:!0},LastName:{title:"Last Name",width:"21%",sorting:!0},FullName:{title:"Full Name",width:"35%",sorting:!0},InviteType:{title:"Invite?",width:"8%",sorting:!0},InviteReply:{title:"Invite Reply",width:"10%",sorting:!0},AnswerInvite:{title:"Manage Invite",width:"9%",sorting:!1,columnSelectable:!1,display:function(a){if("To Me"==a.record.InviteType&&"Rejected"!=a.record.InviteReply){var b=$('<label><img alt="Accept" id="acc'+a.record.ID+'" class="acceptIcon" title="Accept this invite" src="images/activate.png" />&nbsp;&nbsp;<img alt="Reject" id="rej'+a.record.ID+'" class="rejectIcon" title="Reject this invite" src="images/deactivate.png" /></label>');return b}if("From Me"==a.record.InviteType&&"Rejected"!=a.record.InviteReply){var c=$('<img alt="Cancel" id="cancel'+a.record.ID+'" title="Cancel this invite" src="images/deactivate.png" />');return c.click(function(){var b=[a.record.ID];SendInviteCancel(b)}),c}return $("<label>&nbsp;</label>")}},GamerTags:{title:"View Gamer Tags",width:"13%",sorting:!1,display:function(a){var b=$('<a href="#" class="actionLink" id="tagsLink'+a.record.ID+'">Show Tags</a>');return b.click(function(){return OpenGamerTagViewer(gamerTagViewerDlg,gamerTagViewerJTableDiv.substring(1),"Gamer Tag Viewer","Gamer Tags For: "+(a.record.FirstName+" "+a.record.LastName),!0,!0,a.record.ID),!1}),b}},RemoveUser:{title:"Remove",width:"8%",sorting:!1,columnSelectable:!1,display:function(a){if("No"==a.record.InviteType){var b=$('<img alt="Remove" id="remove'+a.record.ID+'" title="Remove this user from friend list" src="images/delete.png" />');return b.click(function(){var b=[a.record.ID];SendInviteReject(b)}),b}return $("<label>&nbsp;</label>")}}},recordsLoaded:function(a,b){$(manageFriendsListJTableDiv+" .jtable-data-row").each(function(){var a=$(this).attr("data-record-key"),c=$.grep(b.records,function(b){return b.ID===a});$(this).find(".acceptIcon").each(function(){$(this).click(function(){var b=[a];SendInviteAccept(b)})}),$(this).find(".rejectIcon").each(function(){$(this).click(function(){var b=[a];SendInviteReject(b)})});var d=c[0].InviteType;"No"!==d&&$(this).css("color","gray")});var c=GetCurWidthClass();"desktop"!=c&&FormatCurFriendsTableForCurrentView(!0,c)}}),ReloadManageFriendsTable(!0)}function ToggleSearchDivDisplay(a,b){var c=$(b).hasClass("fa-plus-square");return c?($(a).removeClass("overlayPanelGroupBorder").addClass("overlayPanelGroupBorder"),$(a).removeClass("overlayPanelGroupExpanded").addClass("overlayPanelGroupExpanded"),$(a).slideDown("slow"),$(b).removeClass("fa-plus-square").addClass("fa-minus-square")):($(a).removeClass("overlayPanelGroupBorder"),$(a).removeClass("overlayPanelGroupExpanded"),$(a).slideUp("slow"),$(b).removeClass("fa-minus-square").addClass("fa-plus-square")),!1}function ReloadAvailUsersTable(a){if(a){var b=ValidateSearchFormFields(".searchPanelAvailUsersFilter"),c="action="+availUsersTableLoadAction+b.postData;$(availUsersJTableDiv).jtable("load",c)}else $(availUsersJTableDiv).jtable("reload")}function ReloadManageFriendsTable(a){if(a){var b=ValidateSearchFormFields(".searchPanelCurFriendsFilter"),c="action="+manageFriendsListTableLoadAction+b.postData;$(manageFriendsListJTableDiv).jtable("load",c)}else $(manageFriendsListJTableDiv).jtable("reload")}function IssueFriendInviteToSelectedUsers(){var a=$(availUsersJTableDiv).jtable("selectedRows");if(0===a.length)return void sweetAlert("No users selected");var b=[];a.each(function(){var a=$(this).data("record").ID;b.push(a)}),SendFriendInviteToUsers(b)||DeselectAllJTableRows(availUsersJTableDiv)}function AcceptUserFriendInvites(){var a=$(manageFriendsListJTableDiv).jtable("selectedRows");if(0===a.length)return void sweetAlert("No users selected");var b=[];a.each(function(){var a=$(this).data("record").ID;b.push(a)}),SendInviteAccept(b)||DeselectAllJTableRows(manageFriendsListJTableDiv)}function RemoveUsersFromFriendList(){var a=$(manageFriendsListJTableDiv).jtable("selectedRows");if(0===a.length)return void sweetAlert("No users selected");var b=[];a.each(function(){var a=$(this).data("record").ID;b.push(a)}),SendInviteReject(b)||DeselectAllJTableRows(manageFriendsListJTableDiv)}function SendFriendInviteToUsers(a){sweetAlert({title:"Confirm Invite",text:"Are you sure you want to send a friend invite to all selected users?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, do it!",closeOnConfirm:!1,closeOnCancel:!1,showLoaderOnConfirm:!0},function(b){b?$.ajax({type:"POST",url:"AJAXHandler.php",data:"action=SendFriendInviteToUsers&"+$.param({userIds:a}),success:function(a){if(a.match("^SYSTEM ERROR"))sweetAlert("Invitations Not Sent",a,"error");else{var b=!1;ReloadManageFriendsTable(b),ReloadAvailUsersTable(b),sweetAlert("Invitations Sent!",a,"success")}},error:function(){sweetAlert("Invitations Not Sent","Unable to send friend invites to selected users: server error. Please try again later.","error")}}):sweetAlert("Friend Invitations Canceled","Your invitations have not been sent","info")})}function SendInviteAccept(a){sweetAlert({title:"Confirm Acceptance",text:"Are you sure you want to accept the friend invitation from all selected users?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, do it!",closeOnConfirm:!1,closeOnCancel:!1,showLoaderOnConfirm:!0},function(b){b?$.ajax({type:"POST",url:"AJAXHandler.php",data:"action=AcceptUserFriendInvites&"+$.param({userIds:a}),success:function(a){if(a.match("^SYSTEM ERROR"))sweetAlert("Could Not Accept Invitations",a,"error");else{var b=!1;ReloadManageFriendsTable(b),sweetAlert("Invitations Accepted!",a,"success")}},error:function(){sweetAlert("Could Not Accept Invitations","Unable to accept invitations from selected users: server error. Please try again later.","error")}}):sweetAlert("Invitation Acceptance Canceled","Your Friends List Has Not Been Changed","info")})}function SendInviteReject(a){sweetAlert({title:"Confirm Removal",text:"Are you sure you want to remove all selected users from your friends list, including invites from users who want to be your friend?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, do it!",closeOnConfirm:!1,closeOnCancel:!1,showLoaderOnConfirm:!0},function(b){b?$.ajax({type:"POST",url:"AJAXHandler.php",data:"action=RemoveUsersFromFriendList&"+$.param({userIds:a}),success:function(a){if(a.match("^SYSTEM ERROR"))sweetAlert("Could Not Remove Users",a,"error");else{var b=!1;ReloadManageFriendsTable(b),ReloadAvailUsersTable(b),sweetAlert("Users Removed",a,"success")}},error:function(){sweetAlert("Could Not Remove Users","Unable to remove selected users from friends list: server error. Please try again later.","error")}}):sweetAlert("Users Not Removed","Your friends list has not been changed","info")})}function SendInviteCancel(a){sweetAlert({title:"Confirm Cancellation",text:"Are you sure you want to cancel pending friend invites to all selected users?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, do it!",cancelButtonText:"No, don't cancel",closeOnConfirm:!1,closeOnCancel:!1,showLoaderOnConfirm:!0},function(b){b?$.ajax({type:"POST",url:"AJAXHandler.php",data:"action=RemoveUsersFromFriendList&"+$.param({userIds:a}),success:function(a){if(a.match("^SYSTEM ERROR"))sweetAlert("Could Not Cancel Invites To Selected Users",a,"error");else{var b=!1;ReloadManageFriendsTable(b),ReloadAvailUsersTable(b),sweetAlert("Success","Invitations Cancelled","success")}},error:function(){sweetAlert("Could Not Cancel Invites To Selected Users","Unable to cancel invitations to selected users: server error. Please try again later.","error")}}):sweetAlert("Invitations Not Cancelled","Your invitations are still active","info")})}function CloseSearchPanel(){return $("#modalOverlay").slideReveal("hide"),$("#searchPanel").slideReveal("hide"),!1}function ToggleControlPanelDisplay(a){if("none"===$(a).css("display"))if($(activePanel).hide(),activePanel=a,$(a).fadeIn("slow",function(){}),activePanel==panelEnum.AvailUserSearch){var b=$(availUsersJTableDiv+" .jtable-title").width();$(availUsersJTableDiv+" .fixedWidthScrollableContainer").css("width",b+10+"px")}else{var b=$(manageFriendsListJTableDiv+" .jtable-title").width();$(manageFriendsListJTableDiv+" .fixedWidthScrollableContainer").css("width",b+10+"px")}return CloseSearchPanel(),DisplaySearchFiltersByCurrentView(),!1}function DisplaySearchFiltersByCurrentView(){var a=$("#searchPanel .overlayPanelToggleGroup.searchPanelCurFriendsFilter,#searchPanel .overlayPanelToggleGroup.searchPanelAvailUsersFilter"),b=a.not(".searchPanelAvailUsersFilter"),c=a.not(".searchPanelCurFriendsFilter"),d=$("#searchPanel .overlayPanelFilterSubGroup .searchPanelCurFriendsFilter,#searchPanel .overlayPanelFilterSubGroup .searchPanelAvailUsersFilter"),e=d.not(".searchPanelAvailUsersFilter"),f=d.not(".searchPanelCurFriendsFilter");if(activePanel===panelEnum.AvailUserSearch){$("#searchPanel").removeClass("overlayPanelGreenBackground").addClass("overlayPanelOrangeBackground"),expandedCurFriendFilterGroups=[],$("#searchPanel .overlayPanelFilterGroup.searchPanelCurFriendsFilter.overlayPanelGroupExpanded").not(".searchPanelAvailUsersFilter").each(function(){expandedCurFriendFilterGroups.push($(this).attr("id")),$(this).removeClass("overlayPanelGroupBorder"),$(this).removeClass("overlayPanelGroupExpanded"),$(this).slideUp("slow")}),b.addClass("hidden"),c.removeClass("hidden"),e.addClass("hidden"),f.removeClass("hidden");var g;for(g=0;g<expandedAvailUserFilterGroups.length;g++){var h=$("#"+expandedAvailUserFilterGroups[g]);h.removeClass("overlayPanelGroupBorder").addClass("overlayPanelGroupBorder"),h.removeClass("overlayPanelGroupExpanded").addClass("overlayPanelGroupExpanded"),h.slideDown("slow")}}else{$("#searchPanel").removeClass("overlayPanelOrangeBackground").addClass("overlayPanelGreenBackground"),expandedAvailUserFilterGroups=[],$("#searchPanel .overlayPanelFilterGroup.searchPanelAvailUsersFilter.overlayPanelGroupExpanded").not(".searchPanelCurFriendsFilter").each(function(){expandedAvailUserFilterGroups.push($(this).attr("id")),$(this).removeClass("overlayPanelGroupBorder"),$(this).removeClass("overlayPanelGroupExpanded"),$(this).slideUp("slow")}),c.addClass("hidden"),b.removeClass("hidden"),f.addClass("hidden"),e.removeClass("hidden");var g;for(g=0;g<expandedCurFriendFilterGroups.length;g++){var h=$("#"+expandedCurFriendFilterGroups[g]);h.removeClass("overlayPanelGroupBorder").addClass("overlayPanelGroupBorder"),h.removeClass("overlayPanelGroupExpanded").addClass("overlayPanelGroupExpanded"),h.slideDown("slow")}}}function ValidateSearchFormFields(a){var b=new SearchEventsFormInfo,c=$(a).find("*[name]").filter(".filterFieldActive");return c&&c.length&&(b.postData+="&"+c.serialize()),b.validated=!0,b}function SearchEventsFormInfo(){this.validated=!1,this.postData=""}var panelEnum={AvailUserSearch:"#searchForFriendsDiv",MyFriendsViewer:"#manageFriendsListDiv"},activePanel=panelEnum.AvailUserSearch,availUsersTableLoadAction="GetFriendInviteAvailUsersForJTable",availUsersJTableDiv="#searchForFriendsContent",manageFriendsListTableLoadAction="GetCurrentFriendsListForJTable",manageFriendsListJTableDiv="#manageFriendsListContent",gamerTagViewerDlg="gamerTagViewerDlg",gamerTagViewerJTableDiv="#viewGamerTagsDiv",expandedAvailUserFilterGroups=[],expandedCurFriendFilterGroups=[],lastWindowWidth=-1,lastWindowHeight=-1;